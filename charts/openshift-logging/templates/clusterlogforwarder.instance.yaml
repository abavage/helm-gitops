kind: ClusterLogForwarder
apiVersion: observability.openshift.io/v1
metadata:
  annotations:
    argocd.argoproj.io/sync-wave: "1"
    argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true
  name: instance
  namespace: openshift-logging
spec:
  serviceAccount:
    name: {{ .Values.serviceaccount }}
  outputs:
    - name: external-es
      type: elasticsearch
      elasticsearch:
        url: 'https://example-elasticsearch-secure.com:9200'
        version: 8
        index: '{.openshift.label.my_log_index||"unknown"}-write'
        #authentication:
        #  username:
        #    key: username
        #    secretName: es-secret
        #  password:
        #    key: password
        #    secretName: es-secret
      tls:
        #ca:
        #  key: ca-bundle.crt
        #  secretName: es-secret
        #certificate:
        #  key: tls.crt
        #  secretName: es-secret
        #key:
        #  key: tls.key
        #  secretName: es-secret
  pipelines:
    - name: input-external-es
      inputRefs:
        - application
        - infrastructure
      outputRefs:
        - external-es
